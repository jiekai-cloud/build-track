# Tiiny.host 部署指南

## 📦 準備好的部署檔案

已為您準備好最新的更新部署檔案（版本 V4.20 - 騎縫章調整版）：
- **檔案名稱**：`build-track-update-v4.20-seal-adjustment.zip`
- **體驗優化**：
  1. **騎縫章調整**：根據您的反饋，將報價單右側的騎縫章尺寸縮小（24mm -> 18mm），位置保持不變，讓版面更加清爽。
  2. **手動備份完整性修復**（V4.19）：現在匯出的備份檔將包含**所有**系統資料（報價單、庫存、廠商等）。
- **新增功能**：
  1. **騎縫章（Paging Seal）**：在 PDF 報價單的每一頁右側邊緣自動加上騎縫章，確保文件的完整性與防偽。
  2. **印章精確定位**（V4.12）：印章移動至銀行帳號下方的空白處，且向左些微偏移。
  3. **印章完全整合**：內建圖片Base64編碼，確保顯示無虞。
  4. **報價單專用章**：支援在預覽與 PDF 列印中顯示。
  5. **聯絡人功能**（V4.6）：自動帶入並顯示聯絡人。
  6. **優化功能**：包含先前所有的列表、字體與表格優化。
  7. **刪除大項**：現在可以刪除整個工程分類（大項）。
  8. **編輯大項編號**：可以直接點擊並修改「壹、貳...」等分類編號。
  9. **跨大項移動**：支援將工項拖曳移動到不同的大項分類中（也可拖曳至空分類）。
- **修復內容**：修正 Vite Base Path 設定，解決部署在根目錄時資源載入失敗的問題
- **位置**：專案根目錄

---

## 🚀 部署步驟

### **步驟 1：登入 Tiiny.host**

1. 前往：https://tiiny.host/
2. 使用您的付費帳戶登入

### **步驟 2：上傳檔案**

1. 點擊「Upload」按鈕或拖放 ZIP 檔案
2. 選擇 `build-track-update-v4.20-seal-adjustment.zip`
3. 等待上傳完成（約 1-2 分鐘）

### **步驟 3：設定密碼保護**（強烈建議）

1. 上傳完成後，進入網站設定
2. 啟用「Password Protection」
3. 設定一個強密碼
4. 儲存設定

### **步驟 4：測試部署**

1. 點擊 Tiiny.host 提供的預覽連結
2. 輸入密碼（如果有設定）
3. 測試以下功能：
   - ✅ 系統載入
   - ✅ Google 登入
   - ✅ 建立測試專案
   - ✅ 報價系統

### **步驟 5：設定 Google Maps API 金鑰**

第一次使用地圖功能時：

1. 前往專案詳情頁面
2. 點擊「地圖與位置」標籤
3. 會看到「設定 API 金鑰」按鈕
4. 點擊後輸入您的 Google Maps API 金鑰
5. 金鑰將安全儲存在瀏覽器 localStorage 中

### **步驟 6：設定 Gemini AI 金鑰**

為了啟用 AI 分析功能：

1. 在系統介面右上角，點擊「AI 智慧服務已啟用」按鈕（綠色閃爍圖示）
2. 在彈出的視窗中輸入您的 **Gemini API Key**
3. 點擊「儲存配置」
4. 此金鑰同樣只會儲存在您的瀏覽器中，確保安全性

---

## 🔐 Google Maps API 金鑰設定

### **取得新的金鑰**：

1. 前往：https://console.cloud.google.com/apis/credentials
2. 點擊「CREATE CREDENTIALS」→「API key」
3. 複製金鑰

### **設定限制**（重要！）：

#### **Application restrictions**：
```
HTTP referrers (網站)
```

#### **Website restrictions**：
```
https://您的tiiny網址.tiiny.site/*
http://localhost:*
```

#### **API restrictions**：
```
限制金鑰
僅選擇：
- Maps JavaScript API
- Geocoding API
```

---

## 🔄 更新部署流程

當您需要更新系統時：

```bash
# 1. 在專案目錄
cd "/Users/jacob/Library/CloudStorage/Dropbox/AI輔助工具/工程管理系統/生活品質工程管理系統"

# 2. 構建最新版本
npm run build

# 3. 創建新的 ZIP
cd dist
zip -r ../build-track-$(date +%Y%m%d-%H%M%S).zip .
cd ..

# 4. 找到最新的 ZIP
ls -lht build-track-*.zip | head -1

# 5. 上傳到 Tiiny.host
# 手動上傳新的 ZIP 檔案
```

---

## 🆚 與 GitHub Pages 的差異

| 功能 | Tiiny.host | GitHub Pages |
|------|-----------|--------------|
| 密碼保護 | ✅ 內建 | ❌ 無 |
| API 金鑰安全 | ✅ 用戶配置 | ❌ 需編譯時嵌入 |
| 部署方式 | 手動上傳 | 自動 Git 推送 |
| 自訂網域 | ✅ | ✅ |
| SSL | ✅ | ✅ |

---

## ⚠️ 重要提醒

### **1. API 金鑰管理**
- ✅ 金鑰儲存在用戶瀏覽器（localStorage）
- ✅ 不會上傳到任何伺服器
- ✅ 每個用戶可以使用自己的金鑰
- ✅ 清除瀏覽器資料會移除金鑰

### **2. 密碼保護**
- 🔐 建議設定強密碼
- 🔐 只分享給內部團隊成員
- 🔐 定期更換密碼

### **3. 數據安全**
- ✅ 所有數據儲存在用戶瀏覽器
- ✅ 不會傳送到遠端伺服器
- ✅ 建議定期使用「匯出」功能備份

---

## 📞 常見問題

### **Q: 如果忘記密碼怎麼辦？**
A: 在 Tiiny.host Dashboard 中可以重設密碼。

### **Q: 可以設定自訂網域嗎？**
A: 可以！在 Tiiny.host 的網站設定中添加自訂網域。

### **Q: 為什麼需要設定 Google Maps API 金鑰？**
A: 為了安全性。每個用戶可以使用自己的金鑰，避免金鑰外洩和濫用。

### **Q: 團隊成員如何使用？**
A: 分享 Tiiny.host 網址和密碼，每個成員第一次使用地圖功能時需要設定自己的 API 金鑰。

---

## 🎯 部署檢查清單

部署完成後，請確認：

- [ ] ✅ 網站可以正常訪問
- [ ] ✅ 密碼保護已啟用
- [ ] ✅ Google 登入功能正常
- [ ] ✅ 可以建立和編輯專案
- [ ] ✅ 報價系統運作正常
- [ ] ✅ 地圖功能可以正常使用（設定 API 金鑰後）
- [ ] ✅ 團隊成員已收到網址和密碼

---

## 📊 下次更新時間

建議每週或有重大功能更新時重新部署。

**上次部署**：2026-02-09 19:11
**下次檢查**：2026-02-15

---

**祝您部署順利！** 🚀

如有任何問題，請參考 SECURITY.md 或聯繫技術支援。
